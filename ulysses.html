<!DOCTYPE html>
<html>
<!-- <<<<<<< HEAD
    <head>
        <meta charset="UTF-8">
        <title>Turn-Based RPG in Phaser 3</title>
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
        <script src="js/phaser.min.js"></script>
        <script src="js/gamePart2.js"></script>
        <style>
        html,
        body {
            margin: 0;
            padding: 0;
        }
    </style>
    </head>
    <body>
        <div id="content" style="display: block; width: 100%; text-align: center"></div>
    </body>
</html>

======= -->
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>

    <script>
    var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 0 },
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);

    var heathbar =[]

    heathbar.push(src='assets/heath/0Hit_healthbar.png');
    // let heath1hit = this.add.image(125, 25, 'heath1hit');
    heathbar.push(src='assets/heath/1Hit_healthbar.png');
    // let heath2hit = this.add.image(125, 25, 'heath2hit');
    heathbar.push(src='assets/heath/2Hit_healthbar.png');
    // let heath3hit = this.add.image(125, 25, 'heath3hit');
    heathbar.push(src='assets/heath/3Hit_healthbar.png');
    // let heath4hit = this.add.image(125, 25, 'heath4hit');
    heathbar.push(src='assets/heath/4Hit_healthbar.png');
    // let heath5hit = this.add.image(125, 25, 'heath5hit');
    heathbar.push(src='assets/heath/5Hit_healthbar.png');
    // let heath6hit = this.add.image(125, 25, 'heath6hit');
    heathbar.push(src='assets/heath/6Hit_healthbar.png');
    // let heath7hit = this.add.image(125, 25, 'heath7hit');
    heathbar.push(src='assets/heath/7Hit_healthbar.png');
    // let heath8hit = this.add.image(125, 25, 'heath8hit');
    heathbar.push(src='assets/heath/8Hit_healthbar.png');


function preload ()
{
    // this.load.image('tiles','./assets/RPG Nature Tileset.png');
    // this.load.tilemapTiledJSON('map1','./assets/map1.json');
    this.load.image('sky', 'assets/backupPng/sky.png');
    // this.load.image('ground', 'assets/platform.png');
    // this.load.image('star', 'assets/orb2.png');
    // this.load.image('bomb', 'assets/bomb.png');
    this.load.spritesheet('player','assets/robePlayer.png',{ frameWidth: 32, frameHeight: 32.1 });
    this.load.spritesheet('enemy','assets/enemy.png',{ frameWidth: 32, frameHeight: 32.1 });
    this.load.image('heathempty','assets/heath/empty2.png');
    this.load.image('heath0hit',heathbar[0]);
    this.load.image('heath1hit',heathbar[1]);
    this.load.image('heath2hit',heathbar[2]);
    this.load.image('heath3hit',heathbar[3]);
    this.load.image('heath4hit',heathbar[4]);
    this.load.image('heath5hit',heathbar[5]);
    this.load.image('heath6hit',heathbar[6]);
    this.load.image('heath7hit',heathbar[7]);
    this.load.image('heath8hit',heathbar[8]);
    console.log(heathbar[0])
}
var playerHit
function create ()
{
    this.add.image(400, 300, 'sky');
    // const map = this.make.tilemap({key: 'map'});
    // const tileset = map.addTilesetImage ('RPG Nature Tileset' , 'tiles',32,32,0,0);
    // const layer1 = map.createStaticLayer('Tile Layer 1', 'tileset',0,0);
    // this.add.image(400, 300, 'sky');
    playerHit = 0;

    player = this.physics.add.sprite(100, 450, 'player');
    player.setScale(1.75);
    enemy = this.physics.add.sprite(100, 450, 'enemy');
    enemy.setScale(1.75);

    heath = this.add.image(125, 2, 'heathempty');
    // var heath = this.add.image(125, 90, 'heathcomplete');
    heath.setScale(1.75);

    let heath0hit = this.add.image(125, 25, 'heath0hit');
    let heath1hit = this.add.image(125, 25, 'heath1hit');
    let heath2hit = this.add.image(125, 25, 'heath2hit');
    let heath3hit = this.add.image(125, 25, 'heath3hit');
    let heath4hit = this.add.image(125, 25, 'heath4hit');
    let heath5hit = this.add.image(125, 25, 'heath5hit');
    let heath6hit = this.add.image(125, 25, 'heath6hit');
    let heath7hit = this.add.image(125, 25, 'heath7hit');
    let heath8hit = this.add.image(125, 25, 'heath8hit');

    heath0hit.setScale(1.75);
    heath1hit.setScale(1.75);
    heath2hit.setScale(1.75);
    heath3hit.setScale(1.75);
    heath4hit.setScale(1.75);
    heath5hit.setScale(1.75);
    heath6hit.setScale(1.75);
    heath7hit.setScale(1.75);
    heath8hit.setScale(1.75);

    heath0hit.visible = false;
    heath1hit.visible = false;
    heath2hit.visible = false;
    heath3hit.visible = false;
    heath4hit.visible = false;
    heath5hit.visible = false;
    heath6hit.visible = false;
    heath7hit.visible = false;
    heath8hit.visible = false;

    //anims
    this.anims.create({
        key: 'idle',
        frames: this.anims.generateFrameNumbers('player', { frames: [ 8,0,1, 9 ]}),
        frameRate: 1.5,
        repeat: -1
    });
    this.anims.create({
        key: 'left',
        frames: this.anims.generateFrameNumbers('player', {frames: [ 16,17,18,19]}),
        frameRate: 0.5,
        repeat: -1
    });
    this.anims.create({
        key: 'right',
        frames: this.anims.generateFrameNumbers('player', {frames: [ 16,17,18,19]}),
        frameRate: 0.5,
        repeat: -1
    });
    this.anims.create({
        key: 'attack',
        frames: this.anims.generateFrameNumbers('player', {frames: [65,66,67,68,69,70]}),
        frameRate: 0.5,
        repeat: -1

    })

}

function update (){
    // movement
    keys = this.input.keyboard.addKeys("W,A,S,D,N");

    player.setVelocity(0) // player doesnt move
    player.anims.play('idle',true);
    if (keys.A.isDown) {
        player.setVelocityX(-200) // move left
        player.anims.play('left', true);
        player.flipX = true;
    } else if (keys.D.isDown) {
        player.setVelocityX(200); // move right
        player.anims.play('right', true);
        player.flipX = false;
    }
    else if(keys.N.isDown) {
        player.anims.play('attack', true);
    }
    if (keys.W.isDown) {
        player.setVelocityY(-200); // move up
    } else if (keys.S.isDown) {
        player.setVelocityY(200); // move down
    }


    let heath0hit = this.add.image(125, 25, 'heath0hit');
    let heath1hit = this.add.image(125, 25, 'heath1hit');
    let heath2hit = this.add.image(125, 25, 'heath2hit');
    let heath3hit = this.add.image(125, 25, 'heath3hit');
    let heath4hit = this.add.image(125, 25, 'heath4hit');
    let heath5hit = this.add.image(125, 25, 'heath5hit');
    let heath6hit = this.add.image(125, 25, 'heath6hit');
    let heath7hit = this.add.image(125, 25, 'heath7hit');
    let heath8hit = this.add.image(125, 25, 'heath8hit');

    heath0hit.visible = false;
    heath1hit.visible = false;
    heath2hit.visible = false;
    heath3hit.visible = false;
    heath4hit.visible = false;
    heath5hit.visible = false;
    heath6hit.visible = false;
    heath7hit.visible = false;
    heath8hit.visible = false;

    testGain = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Y);
    testDamage1 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.U);
    testDamage2 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.I);
    testDamage3 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.O);
    testDamage4 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P);
    testDamage5 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.H);
    testDamage6 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.J);
    testDamage7 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.K);
    testDamage8 = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.L);
    testempty = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.M);

    //newheath system
    if (Phaser.Input.Keyboard.JustDown (testDamage1)){
        playerHit+=1
    }
    console.log(playerHit)
    if (playerHit == 0){
        heath0hit.setScale(1.75);
        heath0hit.visible = true;
    }
    else if (playerHit == 1){
        heath0hit.visible = false;
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath1hit = this.add.image(125, 25, 'heath1hit');
        heath1hit.setScale(1.75);
    }
    else if (playerHit == 2){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath2hit = this.add.image(125, 25, 'heath2hit');
        heath2hit.setScale(1.75);
    }
    else if (playerHit == 3){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath3hit = this.add.image(125, 25, 'heath3hit');
        heath3hit.setScale(1.75);
    }
    else if (playerHit == 4){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath4hit = this.add.image(125, 25, 'heath4hit');
        heath4hit.setScale(1.75);
    }
    else if (playerHit == 5){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath5hit = this.add.image(125, 25, 'heath5hit');
        heath5hit.setScale(1.75);
    }
    else if (playerHit == 6){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath6hit = this.add.image(125, 25, 'heath6hit');
        heath6hit.setScale(1.75);
    }
    else if (playerHit == 7){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath7hit = this.add.image(125, 25, 'heath7hit');
        heath7hit.setScale(1.75);
    }
    else if (playerHit == 8){
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
        let heath8hit = this.add.image(125, 25, 'heath8hit');
        heath8hit.setScale(1.75);
    }
    else if (playerHit == 9){
        heath0hit.visible = false;
        heath = this.add.image(125, 2, 'heathempty');
        heath.setScale(1.75);
    }
}

    </script>

</body>
</html>